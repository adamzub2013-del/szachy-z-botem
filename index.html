<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Szachy z Botem</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background-color: #f4f4f4;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      grid-template-rows: repeat(8, 1fr);
      width: 80vmin;
      height: 80vmin;
      border: 2px solid #333;
    }
    .square {
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2.5vmin;
      cursor: pointer;
    }
    .white {
      background-color: #f0d9b5;
    }
    .black {
      background-color: #b58863;
    }
    .highlight {
      background-color: yellow;
    }
    #status {
      margin-top: 20px;
      font-size: 1.2em;
      font-weight: bold;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Szachy z Botem</h1>
<div id="board"></div>
<div id="status">Tura białych</div>
<button onclick="newGame()">Nowa gra</button>

<script src="https://cdn.jsdelivr.net/npm/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
<script>
  const boardElement = document.getElementById('board');
  const statusElement = document.getElementById('status');
  let board = Chessboard('board', {
    draggable: true,
    dropOffBoard: 'trash',
    sparePieces: true
  });

  let game = new Chess();

  function renderBoard() {
    board.position(game.fen());
    updateStatus();
  }

  function updateStatus() {
    let status = '';
    if (game.in_checkmate()) {
      status = 'Mat! ';
      status += game.turn() === 'w' ? 'Czarny wygrywa' : 'Biały wygrywa';
    } else if (game.in_draw()) {
      status = 'Remis';
    } else {
      status = 'Tura ' + (game.turn() === 'w' ? 'białych' : 'czarnych');
    }
    statusElement.textContent = status;
  }

  function newGame() {
    game = new Chess();
    renderBoard();
  }

  function makeBestMove() {
    const possibleMoves = game.ugly_moves();
    if (game.game_over()) return;
    const bestMove = getBestMove(possibleMoves);
    game.ugly_move(bestMove);
    renderBoard();
    updateStatus();
  }

  function getBestMove(moves) {
    let bestMove = null;
    let bestValue = -9999;
    for (let i = 0; i < moves.length; i++) {
      game.ugly_move(moves[i]);
      let boardValue = -evaluateBoard(game.board());
      game.undo();
      if (boardValue >= bestValue) {
        bestValue = boardValue;
        bestMove = moves[i];
      }
    }
    return bestMove;
  }

  function evaluateBoard(board) {
    let totalEvaluation = 0;
    for (let row = 0; row < 8; row++) {
      for (let col = 0; col < 8; col++) {
        totalEvaluation += getPieceValue(board[row][col]);
      }
    }
    return totalEvaluation;
  }

  function getPieceValue(piece) {
    if (piece === null) return 0;
    const pieceValues = {
      'p': -10, 'r': -50, 'n': -30, 'b': -30, 'q': -90, 'k': -900,
      'P': 10, 'R': 50, 'N': 30, 'B': 30, 'Q': 90, 'K': 900
    };
    return pieceValues[piece.type] || 0;
  }

  renderBoard();
</script>

</body>
</html>


